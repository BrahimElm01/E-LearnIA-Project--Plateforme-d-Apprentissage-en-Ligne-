<div class="profile-container">
  <!-- App Bar -->
  <div class="app-bar">
    <div class="app-bar-content">
      <div>
        <h1>Profil</h1>
        <p>G√©rer vos informations personnelles</p>
      </div>
      <div class="app-bar-actions">
        <button class="icon-btn" (click)="navigateToHome()" title="Accueil">
          <span class="icon">üè†</span>
        </button>
      </div>
    </div>
  </div>

  <div class="content">
    <div class="profile-card">
      <div class="profile-header">
        <div class="profile-avatar">
          <span class="avatar-icon">üë§</span>
        </div>
        <h2>{{ user()?.fullName }}</h2>
        <p class="profile-role">Professeur</p>
      </div>

      <!-- Messages -->
      @if (errorMessage()) {
        <div class="alert alert-error">
          {{ errorMessage() }}
        </div>
      }
      @if (successMessage()) {
        <div class="alert alert-success">
          {{ successMessage() }}
        </div>
      }

      <!-- Form -->
      <form [formGroup]="profileForm" class="profile-form">
        <div class="form-group">
          <label for="fullName">Nom complet</label>
          <input
            id="fullName"
            type="text"
            formControlName="fullName"
            [readonly]="!isEditing()"
            [class.readonly]="!isEditing()"
            placeholder="Votre nom complet"
          />
          @if (profileForm.get('fullName')?.invalid && profileForm.get('fullName')?.touched) {
            <span class="error-text">Le nom doit contenir au moins 2 caract√®res</span>
          }
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            [readonly]="!isEditing()"
            [class.readonly]="!isEditing()"
            placeholder="votre@email.com"
          />
          @if (profileForm.get('email')?.invalid && profileForm.get('email')?.touched) {
            <span class="error-text">Email invalide</span>
          }
        </div>

        <div class="form-actions">
          @if (!isEditing()) {
            <button type="button" class="btn btn-primary" (click)="toggleEdit()">
              Modifier le profil
            </button>
          } @else {
            <button type="button" class="btn btn-secondary" (click)="toggleEdit()" [disabled]="isSaving()">
              Annuler
            </button>
            <button type="button" class="btn btn-primary" (click)="saveProfile()" [disabled]="profileForm.invalid || isSaving()">
              @if (isSaving()) {
                <span>Enregistrement...</span>
              } @else {
                <span>Enregistrer</span>
              }
            </button>
          }
        </div>
      </form>

      <div class="profile-footer">
        <button type="button" class="btn btn-danger" (click)="logout()">
          Se d√©connecter
        </button>
      </div>
    </div>
  </div>
</div>







